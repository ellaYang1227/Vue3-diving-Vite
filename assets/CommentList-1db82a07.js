import{C as p,d as w}from"./decimalFormat-61690882.js";import{S as b,t as k,i as v,r as D,s as V,a as M,b as L}from"./VueStarRating.common-17b108e4.js";import{s as y}from"./vue-multiselect.esm-43659109.js";import{C as _}from"./bootstrap.esm-e2f1acc9.js";import{m as N,bw as C,L as O,o as s,c as o,b as i,bd as d,al as m,aL as u,u as n,a as r,F as c,ap as g,b1 as f}from"./dateFormat-6c69c48f.js";import{_ as h}from"./CommentCard-937c5333.js";const z={class:"list-group list-group-flush"},A={class:"list-group-item bg-transparent px-0"},B={class:"row gy-3"},I={key:0,class:"col-md-6 mb-0 fw-bold"},q={class:"fs-2 text-lightPrimary font-barlow"},F={class:"fs-2 text-lightPrimary font-barlow"},P=i("small",{class:"d-block"},"評論",-1),x={key:1,class:"ms-auto btn-group col-auto align-self-end"},$={class:"list-group list-group-flush collapse",ref:"commentCollapse"},j={key:1,class:"list-group-item bg-transparent px-0 opacity-75"},E={data(){return{showCount:3,findComments:{data:[]},commentCollapse:null,isShowCommentCollapse:!1,selectedSort:"creationDate",sortOptions:[{label:"發文時間",value:"creationDate"},{label:"評論分數",value:"score"}]}},props:{userId:{type:String,required:!0},userName:{type:String,required:!1},isMemberStyle:{type:Boolean,required:!1,default:!1}},computed:{...N(p,["comments","initComments"]),showCommentsData(){return this.isMemberStyle?this.findComments.data:this.findComments.data.slice(0,this.showCount)},collapseCommentsData(){return this.isMemberStyle?[]:this.findComments.data.slice(this.showCount)}},watch:{userId(){this.getCommentsApi()},comments(){const t=this.comments.find(e=>e.userId==this.userId);t&&(this.findComments=t,this.findComments.data.sort((e,l)=>l[this.selectedSort]-e[this.selectedSort]))},selectedSort:{handler(t,e){if(t){const{value:l}=t;this.findComments.data.sort((a,S)=>S[l]-a[l])}}}},components:{VueMultiselect:y,StarRating:b,CommentCard:h},mounted(){this.getCommentsApi()},methods:{...C(O,["hideLoading"]),...C(p,["getComments"]),getCommentsApi(){this.getComments().then(t=>{this.selectedSort=this.sortOptions[0],this.collapseCommentsData.length&&(this.commentCollapse=new _(this.$refs.commentCollapse,{toggle:!1})),this.hideLoading()})},showCommentCollapse(){this.commentCollapse.show(),this.isShowCommentCollapse=!0}}},K=Object.assign(E,{__name:"CommentList",setup(t){return(e,l)=>(s(),o("ul",z,[i("li",A,[i("div",B,[t.isMemberStyle?m("",!0):(s(),o("h5",I,"給「"+d(t.userName)+"」的評論",1)),i("div",{class:u(["d-flex flex-column align-items-center lh-sm",[t.isMemberStyle?"col col-sm-3 col-lg-2":"col"]])},[i("strong",q,d(n(w)(e.findComments.averageScore,1)),1),r(n(b),{"text-class":n(k),increment:n(v),rating:e.findComments.averageScore,"read-only":n(D),"star-size":n(V),"show-rating":!1,"active-color":n(M),"inactive-color":n(L)},null,8,["text-class","increment","rating","read-only","star-size","active-color","inactive-color"])],2),i("div",{class:u(["text-center lh-sm",[t.isMemberStyle?"col col-sm-3 col-lg-2":"col"]])},[i("strong",F,[e.findComments.data.length?(s(),o(c,{key:0},[g(d(e.findComments.data.length),1)],64)):(s(),o(c,{key:1},[g("0")],64))]),P],2),t.isMemberStyle?(s(),o("div",x,[r(n(y),{modelValue:e.selectedSort,"onUpdate:modelValue":l[0]||(l[0]=a=>e.selectedSort=a),options:e.sortOptions,label:"label","track-by":"label",searchable:!1},null,8,["modelValue","options"])])):m("",!0)])]),(s(!0),o(c,null,f(e.showCommentsData,a=>(s(),o("li",{class:"list-group-item bg-transparent px-0",key:a.id},[r(h,{comment:a},null,8,["comment"])]))),128)),e.collapseCommentsData.length?(s(),o("li",{key:0,class:u(["list-group-item bg-transparent px-0",{"py-0":e.isShowCommentCollapse}])},[e.isShowCommentCollapse?m("",!0):(s(),o("button",{key:0,class:"btn btn-link text-lightPrimary p-0 opacity-75",type:"button",onClick:l[1]||(l[1]=(...a)=>e.showCommentCollapse&&e.showCommentCollapse(...a))},"更多評論")),i("ul",$,[(s(!0),o(c,null,f(e.collapseCommentsData,a=>(s(),o("li",{class:"list-group-item bg-transparent px-0",key:a.id},[r(h,{comment:a},null,8,["comment"])]))),128))],512)],2)):m("",!0),e.showCommentsData.length?m("",!0):(s(),o("li",j,"目前沒有評論"))]))}});export{K as _};
