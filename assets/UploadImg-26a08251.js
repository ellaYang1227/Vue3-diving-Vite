import{m as y,L,_ as b,r as l,o as a,c as i,b as c,w as k,d as r,aN as S,F as m,an as q,b4 as w,aO as u}from"./dateFormat-6766bd6f.js";import{a as B,E as R}from"./vee-validate.esm-8ceb177b.js";import{f as v}from"./formSchema-19c1282a.js";const N={data(){return{formSchema:v,isLoading:!1}},props:{errors:{type:Object,required:!0},inputName:{type:String,required:!1,default:"img_0"},img:{type:String,required:!0},isRequired:{type:Boolean,required:!1,default:!1},showErrMsg:{type:Boolean,required:!1,default:!0}},emits:["update:img"],computed:{...y(L,["isLoadingBtn"])},components:{Field:B,ErrorMessage:R},methods:{upload(s){const t=s.target.files[0];this.errors[this.inputName]||!t?this.handleUploadResult():(this.isLoading=!0,setTimeout(()=>{let e=new FileReader;e.onload=n=>{this.handleUploadResult(n.target.result)},e.onerror=n=>{this.handleUploadResult()},e.readAsDataURL(t)},500))},handleUploadResult(s=""){this.isLoading=!1,this.$emit("update:img",s)}}},E=["type","accept","disabled"],F={class:"w-100 h-100 p-1 d-flex flex-column align-items-center justify-content-center position-relative"},U=["src"],x={key:1,class:"d-flex flex-column align-items-center justify-content-center icon-color"},I=r("div",{class:"spinner-border",role:"status","aria-hidden":"true"},null,-1),M=r("small",{class:"pt-1"},"Loading...",-1),C=[I,M];function j(s,t,e,n,o,d){const f=l("font-awesome-icon"),p=l("Field"),g=l("ErrorMessage");return a(),i(m,null,[c(p,{ref:"provider",name:e.inputName,type:o.formSchema.uploadImg.type,rules:o.formSchema.uploadImg.rules[e.isRequired?"required":"noRequired"]},{default:k(({field:h})=>[r("label",{class:u(["file-img",{"border-danger":e.errors[e.inputName],"cursor-default":o.isLoading||s.isLoadingBtn}])},[r("input",S(h,{class:"form-control d-none",type:o.formSchema.uploadImg.type,accept:o.formSchema.uploadImg.accept,disabled:o.isLoading||s.isLoadingBtn,onChange:t[0]||(t[0]=(..._)=>d.upload&&d.upload(..._))}),null,16,E),r("div",F,[o.isLoading?(a(),i("div",x,C)):(a(),i(m,{key:0},[e.img?(a(),i("img",{key:0,src:e.img,class:"img-cover",alt:"上傳圖片"},null,8,U)):(a(),q(f,{key:1,size:"2x",icon:"fa-solid fa-arrow-up-from-bracket",class:"icon-color"}))],64)),w(s.$slots,"imgFunctions")])],2)]),_:3},8,["name","type","rules"]),c(g,{name:e.inputName,class:u(["invalid-feedback",{"d-block":e.showErrMsg}])},null,8,["name","class"])],64)}const A=b(N,[["render",j]]);export{A as U};
