import{f as n}from"./formSchema-ec93e38c.js";import{m as h,L as y,r as L,o,c as l,a as d,w as b,b as i,aK as k,u as t,F as u,ak as q,b2 as w,aL as c}from"./dateFormat-185f520a.js";import{a as m,E as g}from"./vee-validate.esm-6e0adde9.js";const B=["type","accept","disabled"],R={class:"w-100 h-100 p-1 d-flex flex-column align-items-center justify-content-center position-relative"},v=["src"],N={key:1,class:"d-flex flex-column align-items-center justify-content-center icon-color"},_=i("div",{class:"spinner-border",role:"status","aria-hidden":"true"},null,-1),S=i("small",{class:"pt-1"},"Loading...",-1),U=[_,S],E={data(){return{isLoading:!1}},props:{errors:{type:Object,required:!0},inputName:{type:String,required:!1,default:"img_0"},img:{type:String,required:!0},isRequired:{type:Boolean,required:!1,default:!1},showErrMsg:{type:Boolean,required:!1,default:!0}},emits:["update:img"],computed:{...h(y,["isLoadingBtn"])},components:{Field:m,ErrorMessage:g},methods:{upload(e){const a=e.target.files[0];this.errors[this.inputName]||!a?this.handleUploadResult():(this.isLoading=!0,setTimeout(()=>{let s=new FileReader;s.onload=r=>{this.handleUploadResult(r.target.result)},s.onerror=r=>{this.handleUploadResult()},s.readAsDataURL(a)},500))},handleUploadResult(e=""){this.isLoading=!1,this.$emit("update:img",e)}}},C=Object.assign(E,{__name:"UploadImg",setup(e){return(a,s)=>{const r=L("font-awesome-icon");return o(),l(u,null,[d(t(m),{ref:"provider",name:e.inputName,type:t(n).uploadImg.type,rules:t(n).uploadImg.rules[e.isRequired?"required":"noRequired"]},{default:b(({field:p})=>[i("label",{class:c(["file-img",{"border-danger":e.errors[e.inputName],"cursor-default":a.isLoading||a.isLoadingBtn}])},[i("input",k(p,{class:"form-control d-none",type:t(n).uploadImg.type,accept:t(n).uploadImg.accept,disabled:a.isLoading||a.isLoadingBtn,onChange:s[0]||(s[0]=(...f)=>a.upload&&a.upload(...f))}),null,16,B),i("div",R,[a.isLoading?(o(),l("div",N,U)):(o(),l(u,{key:0},[e.img?(o(),l("img",{key:0,src:e.img,class:"img-cover"},null,8,v)):(o(),q(r,{key:1,size:"2x",icon:"fa-solid fa-arrow-up-from-bracket",class:"icon-color"}))],64)),w(a.$slots,"imgFunctions")])],2)]),_:3},8,["name","type","rules"]),d(t(g),{name:e.inputName,class:c(["invalid-feedback",{"d-block":e.showErrMsg}])},null,8,["name","class"])],64)}}});export{C as _};
