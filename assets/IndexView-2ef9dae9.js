import{A as K}from"./aos-76b44cf2.js";import{d as Y,a5 as k,f as B,z as J,A as Q,o as c,c as m,b2 as j,b as i,r as w,ak as I,w as $,u as V,bd as h,al as P,g as D,a as b,m as M,bw as F,F as _,b1 as y,L as W,ap as L,aL as E}from"./dateFormat-6c69c48f.js";import{S as X,s as Z}from"./swiperParams-f2f7503a.js";import{g as G,A as tt}from"./ActivityStore-c530c585.js";import{d as et,C as R}from"./decimalFormat-61690882.js";import{O as it}from"./OrderStore-2832553d.js";import{O as st}from"./OptionStore-7845444d.js";import{p as H}from"./propsValidator-40732aba.js";import{_ as C}from"./UserMugShot-05128f3d.js";import{_ as at}from"./CommentCard-937c5333.js";import{n as ot}from"./runtime-dom.esm-bundler-56dfeb61.js";import{_ as nt}from"./_plugin-vue_export-helper-c27b6911.js";import"./axiosBase-c8bf13dd.js";import"./MemberStore-50669d50.js";import"./VueStarRating.common-17b108e4.js";import"./vue.runtime.esm-bundler-a61ba88c.js";const rt="/Vue3-diving-Vite/assets/diving-0d7546ba.svg",lt="/Vue3-diving-Vite/assets/peoples-49273bf6.svg",ct="/Vue3-diving-Vite/assets/area-ae7a8f4a.svg",dt="/Vue3-diving-Vite/assets/license-d6779c7a.svg",ut="/Vue3-diving-Vite/assets/score-cbb8c8ca.svg",mt="/Vue3-diving-Vite/assets/comment-5747a037.png";var ht=Object.defineProperty,ft=Object.defineProperties,pt=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,q=(t,s,a)=>s in t?ht(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,z=(t,s)=>{for(var a in s||(s={}))gt.call(s,a)&&q(t,a,s[a]);if(U)for(var a of U(s))vt.call(s,a)&&q(t,a,s[a]);return t},_t=(t,s)=>ft(t,pt(s)),N=globalThis&&globalThis.__assign||function(){return(N=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++)for(var e in s=arguments[a])Object.prototype.hasOwnProperty.call(s,e)&&(t[e]=s[e]);return t}).apply(this,arguments)},yt=function(){function t(s,a,n){var e=this;this.endVal=a,this.options=n,this.version="2.1.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.count=function(r){e.startTime||(e.startTime=r);var d=r-e.startTime;e.remaining=e.duration-d,e.useEasing?e.countDown?e.frameVal=e.startVal-e.easingFn(d,0,e.startVal-e.endVal,e.duration):e.frameVal=e.easingFn(d,e.startVal,e.endVal-e.startVal,e.duration):e.countDown?e.frameVal=e.startVal-(e.startVal-e.endVal)*(d/e.duration):e.frameVal=e.startVal+(e.endVal-e.startVal)*(d/e.duration),e.countDown?e.frameVal=e.frameVal<e.endVal?e.endVal:e.frameVal:e.frameVal=e.frameVal>e.endVal?e.endVal:e.frameVal,e.frameVal=Number(e.frameVal.toFixed(e.options.decimalPlaces)),e.printValue(e.frameVal),d<e.duration?e.rAF=requestAnimationFrame(e.count):e.finalEndVal!==null?e.update(e.finalEndVal):e.callback&&e.callback()},this.formatNumber=function(r){var d,f,g,v,A=r<0?"-":"";d=Math.abs(r).toFixed(e.options.decimalPlaces);var o=(d+="").split(".");if(f=o[0],g=o.length>1?e.options.decimal+o[1]:"",e.options.useGrouping){v="";for(var u=0,x=f.length;u<x;++u)u!==0&&u%3==0&&(v=e.options.separator+v),v=f[x-u-1]+v;f=v}return e.options.numerals&&e.options.numerals.length&&(f=f.replace(/[0-9]/g,function(l){return e.options.numerals[+l]}),g=g.replace(/[0-9]/g,function(l){return e.options.numerals[+l]})),A+e.options.prefix+f+g+e.options.suffix},this.easeOutExpo=function(r,d,f,g){return f*(1-Math.pow(2,-10*r/g))*1024/1023+d},this.options=N(N({},this.defaults),n),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(a),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof s=="string"?document.getElementById(s):s,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",window!==void 0&&this.options.enableScrollSpy&&(this.error?console.error(this.error,s):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return e.handleScroll(e)}),window.onscroll=function(){window.onScrollFns.forEach(function(r){return r()})},this.handleScroll(this)))}return t.prototype.handleScroll=function(s){if(s&&window){var a=window.innerHeight+window.scrollY,n=s.el.offsetTop+s.el.offsetHeight;n<a&&n>window.scrollY&&s.paused?(s.paused=!1,setTimeout(function(){return s.start()},s.options.scrollSpyDelay)):window.scrollY>n&&!s.paused&&s.reset()}},t.prototype.determineDirectionAndSmartEasing=function(){var s=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>s;var a=s-this.startVal;if(Math.abs(a)>this.options.smartEasingThreshold){this.finalEndVal=s;var n=this.countDown?1:-1;this.endVal=s+n*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=s,this.finalEndVal=null;this.finalEndVal?this.useEasing=!1:this.useEasing=this.options.useEasing},t.prototype.start=function(s){this.error||(this.callback=s,this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},t.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},t.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},t.prototype.update=function(s){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(s),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal||this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},t.prototype.printValue=function(s){var a=this.formattingFn(s);this.el.tagName==="INPUT"?this.el.value=a:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=a:this.el.innerHTML=a},t.prototype.ensureNumber=function(s){return typeof s=="number"&&!isNaN(s)},t.prototype.validateValue=function(s){var a=Number(s);return this.ensureNumber(a)?a:(this.error="[CountUp] invalid start or end value: "+s,null)},t.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},t}();const wt={class:"countup-wrap"},bt={name:"CountUp"},Vt=Y(_t(z({},bt),{props:{endVal:null,startVal:{default:0},duration:{default:2.5},decimalPlaces:{default:0},autoplay:{type:Boolean,default:!0},loop:{type:[Boolean,Number,String],default:!1},delay:{default:0},options:{default:void 0}},emits:["init","finished"],setup(t,{expose:s,emit:a}){const n=t;let e=k(),r=k();const d=()=>{if(!e.value)return;const l=Number(n.startVal),p=Number(n.endVal),S=Number(n.duration);if(r.value=new yt(e.value,p,z({startVal:l,duration:S,decimalPlaces:n.decimalPlaces},n.options)),r.value.error){console.error(r.value.error);return}a("init",r.value)},f=l=>{var p;(p=r.value)==null||p.start(l)};B(()=>n.endVal,l=>{var p;n.autoplay&&((p=r.value)==null||p.update(l))});const g=k(!1);let v=0;const A=()=>{v++,f(()=>{typeof n.loop=="boolean"&&n.loop||n.loop>v?u(()=>{var p;(p=r.value)==null||p.reset(),A()},n.delay):g.value=!0})};B(g,l=>{l&&a("finished")}),J(()=>{d(),n.autoplay&&A()}),Q(()=>{var l;cancelAnimationFrame(o),(l=r.value)==null||l.reset()});let o;const u=(l,p=1)=>{let S;function O(T){S||(S=T),T-S<p*1e3?o=requestAnimationFrame(O):l()}o=requestAnimationFrame(O)};return s({init:d,restart:()=>{d(),f()}}),(l,p)=>(c(),m("div",wt,[j(l.$slots,"prefix"),i("span",{ref_key:"elRef",ref:e},null,512),j(l.$slots,"suffix")]))}}));const At={class:"corner-card"},xt={class:"img-frame mb-3"},St=i("div",{class:"outer-border"},null,-1),Ct={class:"card custom-rectangle"},Ft=["src","alt"],$t={key:0,class:"card-img-overlay"},Dt={class:"fs-6 font-barlow badge rounded-pill bg-darkPrimary bg-opacity-75 text-body border border-lightPrimary border-2"},kt={class:"h5 mb-1 text-primary text-truncate-row-2 fw-bold"},Pt={class:"list-unstyled text-body lh-sm"},Et={class:"font-barlow"},Nt={class:"row align-items-center fw-bold pt-2"},It={class:"col text-truncate"},Ot={class:"col-auto font-barlow list-inline"},Tt={class:"list-inline-item"},Bt={key:0,class:"list-inline-item"},jt={key:1,class:"list-inline-item"},Mt={props:{activity:{type:Object,required:!0,validator(t){return H("CornerActivityCard",t,["id","title","imgs","location","startDate","endDate","isNitrox","cylinderTotalId","user"])}}},components:{UserMugShot:C}},Lt=Object.assign(Mt,{__name:"CornerActivityCard",setup(t){return(s,a)=>{const n=w("router-link");return c(),I(n,{to:`/activity/${t.activity.id}`,class:"col text-decoration-none"},{default:$(()=>[i("div",At,[i("div",xt,[St,i("div",Ct,[i("img",{src:V(G)(t.activity.imgs).img,class:"card-img custom-rectangle img-cover",alt:`[${t.activity.location.name}]${t.activity.title}`},null,8,Ft),t.activity.score?(c(),m("div",$t,[i("span",Dt,h(V(et)(t.activity.score,1)),1)])):P("",!0)])]),i("h2",kt,h(t.activity.title),1),i("ul",Pt,[i("li",null,h(t.activity.location.name),1),i("li",Et,h(V(D)(t.activity.startDate))+" ~ "+h(V(D)(t.activity.endDate)),1),i("li",Nt,[i("div",It,[b(C,{"width-size":30,name:t.activity.user.name,img:t.activity.user.img},null,8,["name","img"])]),i("ul",Ot,[i("li",Tt,h(t.activity.certificateLevel.name),1),t.activity.isNitrox?(c(),m("li",Bt,"高氧")):P("",!0),t.activity.cylinderTotalId?(c(),m("li",jt,h(t.activity.cylinderTotal.name),1)):P("",!0)])])])])]),_:1},8,["to"])}}});const Rt={class:"bottom-frame-card"},Ut={class:"img-frame mb-3"},qt=i("div",{class:"outer-border custom-rectangle border border-card-border-width"},null,-1),zt={class:"card custom-rectangle"},Gt=["src","alt"],Ht={class:"shadow py-1 card-img-overlay d-flex align-items-center text-body bg-darkPrimary bg-opacity-80"},Kt={class:"h5 mb-1 text-primary text-truncate-row-2 fw-bold"},Yt={class:"list-unstyled text-body lh-sm"},Jt={class:"font-barlow"},Qt={props:{activity:{type:Object,required:!0,validator(t){return H("BottomFrameActivityCard",t,["id","title","imgs","location","startDate","endDate","user"])}}},components:{UserMugShot:C}},Wt=Object.assign(Qt,{__name:"BottomFrameActivityCard",setup(t){return(s,a)=>{const n=w("router-link");return c(),I(n,{to:`/activity/${t.activity.id}`,class:"col text-decoration-none"},{default:$(()=>[i("div",Rt,[i("div",Ut,[qt,i("div",zt,[i("img",{src:V(G)(t.activity.imgs).img,class:"card-img custom-rectangle img-cover",alt:`[${t.activity.location.name}]${t.activity.title}`},null,8,Gt),i("div",Ht,[b(C,{name:t.activity.user.name,img:t.activity.user.img,score:t.activity.score,isShowRating:!1},null,8,["name","img","score"])])])]),i("h2",Kt,h(t.activity.title),1),i("ul",Yt,[i("li",null,h(t.activity.location.name),1),i("li",Jt,h(V(D)(t.activity.startDate))+" ~ "+h(V(D)(t.activity.endDate)),1)])])]),_:1},8,["to"])}}});const Xt={data(){return{commentImg:mt,bannerIcons:[{title:"揪團潛水",img:rt,total:null},{title:"報名人數",img:lt,total:null},{title:"潛水地區",img:ct,total:null}],activityNavs:{hot:"熱門",new:"最新"},activeActivityNav:"hot",features:[{title:`證照門檻
找伴揪安心`,img:dt},{title:`評分機制
加團不踩雷`,img:ut}],newActivities:[],hotActivities:[],goodRatingActivities:[],adLocations:[]}},inject:["frontLayoutData"],components:{CornerActivityCard:Lt,BottomFrameActivityCard:Wt,UserMugShot:C,CountUp:Vt,CommentCard:at},computed:{...M(R,["initComments"]),...M(st,["locations"]),activityCards(){let t=[];switch(this.activeActivityNav){case"new":t=this.newActivities;break;case"hot":t=this.hotActivities;break}return t},comments(){return this.initComments.slice(0,6)}},watch:{locations(){this.setBannerIconsTotal(2,this.locations.length)}},created(){this.frontLayoutData.showSearchBar=!1,this.frontLayoutData.isMainOverflowHidden=!0},mounted(){Promise.all([this.getNewActivities(),this.getHotActivities(),this.getAdLocations(),this.getComments(),this.getFilterIsDeleteActivities(),this.getFilterIsDeleteOrders()]).then(t=>{t[0]=this.setScore(t[0]),this.goodRatingActivities=this.getGoodRatingActivities(t[0]),this.newActivities=t[0].slice(0,3),this.hotActivities=this.setScore(t[1]),this.adLocations=t[2],this.setBannerIconsTotal(0,t[4].length),this.setBannerIconsTotal(1,t[5].length),this.setBannerIconsTotal(2,this.locations.length),this.setSwiper("commentSwiper"),this.setSwiper("goodRatingSwiper"),this.hideLoading(),K.init({duration:1200,easing:"ease-in-out-back"})})},methods:{...F(tt,["getNewActivities","getHotActivities","getAdLocations","getFilterIsDeleteActivities"]),...F(R,["getComments","setScore"]),...F(W,["hideLoading"]),...F(it,["getFilterIsDeleteOrders"]),setBannerIconsTotal(t,s){this.bannerIcons[t].total=Math.floor(Math.random()*s*50)},getGoodRatingActivities([...t]){return t.sort((s,a)=>a.score-s.score).slice(0,3)},toggleActiveActivityNav(t){this.activeActivityNav=t},setSwiper(t){let s=null;t==="commentSwiper"?s={grid:{rows:2}}:t==="goodRatingSwiper"&&(s={slidesPerView:1,breakpoints:{768:{slidesPerView:2},1200:{slidesPerView:3}}}),new X(this.$refs[t],{...Z,...s})}}},Zt={class:"bg-img pb-5 py-lg-5"},te={class:"container text-center py-5","data-aos":"zoom-out-down"},ee=i("h6",{class:"en-title text-uppercase fs-5 font-barlow mb-0"},"DIVING",-1),ie=i("h1",{class:"main-title display-3 mb-0 fw-bold"},"潛安伴旅這裡揪",-1),se=i("h2",{class:"sub-title opacity-75 fs-4"},"在氣瓶海人遇見好潛伴",-1),ae={class:"d-grid col-7 col-md-4 col-lg-3 mx-auto mt-4"},oe={class:"bg-primary bg-opacity-20 mt-3","data-aos":"fade-up","data-aos-delay":"600"},ne={class:"container py-4"},re={class:"row gx-0 gy-4 justify-content-center"},le=["src"],ce={class:"text-center flex-grow-1 flex-md-grow-0"},de={class:"d-block text-primary fw-light font-barlow display-4 lh-1"},ue={class:"container","data-aos":"fade-up"},me={class:"nav fs-4"},he=["onClick"],fe={class:"row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-4"},pe={class:"row gy-4 justify-content-center py-4 py-md-5"},ge=["data-aos"],ve={class:"row g-0"},_e={class:"col-5"},ye=["src","alt"],we={class:"col fw-bold text-warning fs-1 mb-0 white-space-pre-wrap lh-sm align-self-center mt-3 mt-xl-5"},be={class:"bg-primary bg-opacity-20 my-4 my-md-5 py-3","data-aos":"fade-up"},Ve={class:"container-fluid waterfalls-flow-imgs"},Ae={class:"waterfalls-flow-item-img-box"},xe=["src","alt"],Se={class:"position-absolute bottom-0 start-0 m-3 p-2 border border-lightPrimary bg-primary bg-opacity-20"},Ce={class:"text-truncate-row-2 mb-0 text-body fs-5"},Fe={class:"container"},$e={class:"py-4 py-md-5","data-aos":"zoom-out"},De=i("h5",{class:"fs-4 text-center text-primary mb-5"},[i("strong",null,"聽聽其他人怎麼說"),i("small",{class:"d-block text-body fs-6"},"大家參加完潛團的想法是甚麼呢")],-1),ke={class:"row justify-content-center row-cols-1 row-cols-md-2 gy-4 gy-md-0"},Pe={class:"col-10 col-md text-center align-self-center","data-aos":"zoom-out"},Ee=["src"],Ne={class:"col","data-aos":"zoom-out"},Ie={ref:"commentSwiper",class:"swiper comment-swiper offset-pagination"},Oe={class:"swiper-wrapper"},Te=i("div",{class:"swiper-pagination"},null,-1),Be={class:"py-4 py-md-5","data-aos":"fade-up"},je=i("h5",{class:"fs-4 text-center text-primary mb-3"},[i("strong",null,"好評主揪開團"),i("small",{class:"d-block text-body fs-6"},"跟著好主揪 享受安心潛旅")],-1),Me={ref:"goodRatingSwiper",class:"swiper good-rating-swiper offset-pagination"},Le={class:"swiper-wrapper"},Re=i("div",{class:"swiper-pagination"},null,-1);function Ue(t,s,a,n,e,r){const d=w("router-link"),f=w("count-up"),g=w("CornerActivityCard"),v=w("CommentCard"),A=w("BottomFrameActivityCard");return c(),m(_,null,[i("div",Zt,[i("div",te,[ee,ie,se,i("div",ae,[b(d,{to:"addActivity",class:"btn btn-outline-lightPrimary btn-lg rounded-pill",role:"button"},{default:$(()=>[L("我要揪團")]),_:1})])]),i("div",oe,[i("div",ne,[i("div",re,[(c(!0),m(_,null,y(e.bannerIcons,o=>(c(),m("div",{"data-aos":"flip-left","data-aos-delay":"1000",class:"col-7 col-md-4 d-flex justify-content-center align-items-center",key:o.title},[i("img",{src:o.img,class:"banner-icon-size border border-style-dashed border-lightPrimary rounded-circle me-md-2"},null,8,le),i("div",ce,[i("span",de,[b(f,{endVal:o.total,duration:5},null,8,["endVal"])]),L(h(o.title),1)])]))),128))])])])]),i("div",ue,[i("nav",me,[(c(!0),m(_,null,y(e.activityNavs,(o,u,x)=>(c(),m("a",{class:E(["nav-link fw-bold",{disabled:e.activeActivityNav===u,"ps-0":!x}]),"aria-current":"page",href:"#",key:u,onClick:ot(l=>r.toggleActiveActivityNav(u),["prevent"])},h(o),11,he))),128))]),i("div",fe,[(c(!0),m(_,null,y(r.activityCards,(o,u)=>(c(),m("div",{"data-aos":"fade-up",key:o.id},[b(g,{activity:o,class:E({"d-block d-sm-none d-lg-block":u>=2})},null,8,["activity","class"])]))),128))]),i("div",pe,[(c(!0),m(_,null,y(e.features,(o,u)=>(c(),m("div",{class:"col-9 col-md col-lg-5",key:o.title,"data-aos":u%2?"fade-down-left":"fade-down-right"},[i("div",ve,[i("div",_e,[i("img",{src:o.img,alt:o.title,class:"img-fluid"},null,8,ye)]),i("h5",we,h(o.title),1)])],8,ge))),128))])]),i("div",be,[i("div",Ve,[(c(!0),m(_,null,y(e.adLocations,(o,u)=>(c(),I(d,{to:{path:"/activities",query:{locationId:`${o.id}`}},class:E(["position-relative shadow",`waterfalls-flow-item-${u+1}`]),key:o.id,"data-aos":"zoom-out-down","data-aos-delay":50*u},{default:$(()=>[i("div",Ae,[i("img",{src:o.img,alt:o.name,class:"img-cover"},null,8,xe)]),i("div",Se,[i("h2",Ce,h(o.name),1)])]),_:2},1032,["to","class","data-aos-delay"]))),128))])]),i("div",Fe,[i("div",$e,[De,i("div",ke,[i("div",Pe,[i("img",{src:e.commentImg,alt:"評論",class:"comment-img-height"},null,8,Ee)]),i("div",Ne,[i("div",Ie,[i("div",Oe,[(c(!0),m(_,null,y(r.comments,o=>(c(),m("div",{key:o.id,class:"swiper-slide align-items-start"},[b(v,{comment:o,showDate:!1},null,8,["comment"])]))),128))]),Te],512)])])]),i("div",Be,[je,i("div",Me,[i("div",Le,[(c(!0),m(_,null,y(e.goodRatingActivities,o=>(c(),m("div",{class:"swiper-slide",key:o.id},[b(A,{"data-aos":"flip-left",activity:o},null,8,["activity"])]))),128))]),Re],512)])])],64)}const ni=nt(Xt,[["render",Ue]]);export{ni as default};
